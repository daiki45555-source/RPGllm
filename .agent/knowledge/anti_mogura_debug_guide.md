# 🛡️ デバッグ効率化 & アンチモグラ叩きガイド

> **このファイルは毎回参照すること！**

---

## 🎯 デバッグモード起動方法

### 方法1: タイトル画面から
1. **🛠️ Debugボタン** をクリック
2. パスワード: `d0154723939` を入力
3. Enterで即座にデバッグモード起動

### 方法2: ブート画面から
- 隠しパスワード入力欄に直接入力

### デバッグモードでできること
- 能力値・カルマ・絆の即時変更
- 時間操作（朝/昼/夜）
- フェーズスキップ
- 戦闘テスト即開始
- クイックセーブ/ロード

---

## ⚠️ モグラ叩き問題とは？
```
修正A → バグB発生 → 修正B → バグA再発 → 無限ループ！
```
**これを防ぐのがアンチモグラ叩き！**

---

## 🔨 アンチモグラ叩き4ステップ

### Step 1: 変更前に影響範囲を考える（30秒）
「この変更、どこに影響する？」

### Step 2: 最小限の変更だけする
「1つの問題に1つの修正！」
- ❌「ついでにここも」→ 原因特定不能
- ✅ 1つ直す → 確認 → OK → 次

### Step 3: 修正後、関係なさそうな場所も確認
七願CSS変更後の確認リスト：
- □ タイトル画面
- □ キャラメイク
- □ ジャックイベント（別レイヤー！注意！）
- □ フィールド画面
- □ 戦闘画面

### Step 4: 新バグ出たら即戻す
```bash
git checkout -- ファイル名  # 1ファイル戻す
git checkout .              # 全部戻す
```

---

## 📋 修正前チェックリスト
```
□ 何を直す？（1つだけ！）
□ どのファイルを変える？
□ 影響範囲は？（広い？狭い？）
□ デバッグモードで直接そのシーンに飛べる？
```

## 📋 修正後チェックリスト
```
□ 直したい問題 → 直った？
□ 同じ画面の他の要素 → 壊れてない？
□ 別の画面 → 壊れてない？
□ 新しいバグ出た？ → 出たら即戻す！
```

---

## 🗺️ 七願 影響範囲マップ

| 変更ファイル | 影響範囲 | 確認すべき場所 |
|-------------|---------|---------------|
| `style.css` body/html/app | **全画面** | 全部確認！ |
| `style.css` 特定クラス | そのクラス使用箇所 | クラス名でgrep |
| `main.js` イベント系 | 該当イベント | デバッグモードでジャンプ |
| レイヤー系（position/overflow） | **背景が壊れやすい！** | 全シーンの背景確認！ |

---

## 💀 絶対やるな！
1. **「ついでに」の修正** → 原因特定不能
2. **大量変更を一気にコミット** → 戻せなくなる
3. **動いてるコードを消す** → コメントアウトにしろ！
4. **確認なしで次の修正** → モグラ叩きの始まり

---

## 🛠️ シーン別ジャンプコマンド (Console)
```javascript
debug.jumpTo('title')        // タイトル画面
debug.jumpTo('charCreate')   // キャラメイク
debug.jumpTo('karmaTest')    // カルマテスト
debug.jumpTo('jackEvent')    // ジャックイベント
debug.jumpTo('field')        // フィールド
debug.setStats({str:50, int:50}) // ステータス一括設定
```

---

## 📋 シーン別デバッグチェックリスト

| 確認項目 | ジャンプ先 | 確認方法 |
|----------|-----------|----------|
| タイトルUI | `debug.jumpTo('title')` | ボタン配置、背景の重なり |
| 戦闘システム | `debug.jumpTo('battle')` | 攻撃実行、ターン進行 |
| ジャックイベント | `debug.jumpTo('jackEvent')` | 立ち絵表示、セリフ進行 |
| フィールド | `debug.jumpTo('field')` | 移動、エンカウント |

---

## 🌐 URLパラメータで直接起動
開発中はブラウザのURL末尾に以下を付ける：
- `?scene=jackEvent&karma=50`
- `?scene=battle&enemy=slime`

---

## 🎯 まとめ
```
1つ直す → 全体確認 → OK? → 次へ
                    → NG? → 即戻す → 別アプローチ
```
**「急がば回れ、そして飛べ」これがデバッグ効率化の極意！**
